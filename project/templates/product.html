{% extends "layout.html" %} {% block head %}
<link rel="stylesheet" href="/static/css/home.css" />
<link rel="stylesheet" href="/static/css/product.css" />
<link rel="stylesheet" href="/static/css/ribbon.css">
<link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
{% endblock %} {% block main %}

<div class="row" style="margin-bottom: 30px;">
    <div class="column column-left">
        <div class="carousel">
            {% for img in images %}
                <div class="carousel-cell"><img class="cell-img" data-flickity-lazyload="/static/product_images/{{img}}" alt="img"></div>
            {% endfor %}
        </div>

    </div>
    <div class="column column-right">
        <div class="title"><h1>{{product.title}}</h1></div>
        <div class="price">{{product.price}} CAD</div>
        <div class="details">
            {{Markup(product.details)}}
        </div>
        {% if coupon %}
            <div class="ribbon-box"><div class="ribbon">{{coupon.title}}</div></div>
        {% endif %}
        <button class="btn btn-black" id="add_product" onclick="add_product({{product.id}})">ADD TO CART</button>
        <button class="btn btn-black" id="remove_product" onclick="remove_product({{product.id}})">REMOVE FROM CART</button>
    </div>
</div>

<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
<script>
    var elem = document.querySelector('.carousel');
    var flkty = new Flickity( elem, {
        // options
        lazyLoad: true,
        cellAlign: 'center',
        contain: true
    });
</script>
<script src="/static/js/cart.js"></script>
<script>
    var btn_add_product = document.getElementById("add_product")
    var btn_remove_product = document.getElementById("remove_product")
    var prd_id = {{product.id}}

    if (find_product(get_products(), prd_id) != -1) {
        btn_add_product.style.display = "none"
        btn_remove_product.style.display = "initial"
    }
    else {
        btn_add_product.style.display = "initial"
        btn_remove_product.style.display = "none"
    }

    function add_product(id) {
        add_to_cart(id, 1)
        btn_add_product.style.display = "none"
        btn_remove_product.style.display = "initial"
        msg("Item Added to Cart", "primary")
    }
    function remove_product(id) {
        remove_from_cart(id)
        btn_add_product.style.display = "initial"
        btn_remove_product.style.display = "none"
        msg("Item Removed to Cart", "warning")
    }
</script>
{% endblock %}
